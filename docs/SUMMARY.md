# 勞動法規常見問答爬蟲專案 - 分析總結

## 📊 網站可行性評估

| 網站 | 資料量 | 可爬取 | 優先級 | 備註 |
|------|--------|--------|--------|------|
| 勞動部常見問答 | ~383 筆 | ✅ | P0 | 表格式列表，有分頁 |
| 勞保局常見問答 | ~200-300 筆 | ✅ | P0 | 樹狀結構，無分頁 |
| 職安署常見問答 | ~140 筆 | ✅ | P1 | 分類列表，有分頁 |
| 健保署常見問答 | 未知 | ❌ | - | Cloudflare 阻擋 |

**總計**: 約 700-800 筆勞動法規常見問答

---

## ✅ 主要發現

### 1. 所有網站均可順利爬取（除健保署外）
- ✅ 勞動部: 無反爬蟲機制
- ✅ 勞保局: 無反爬蟲機制
- ✅ 職安署: 無反爬蟲機制
- ❌ 健保署: Cloudflare 防護 → **建議放棄**

### 2. 網站結構清晰，易於解析
- **勞動部**: 表格 + 分頁（最簡單）
- **勞保局**: 樹狀目錄（需遞迴解析）
- **職安署**: 分類 + 列表 + 分頁（中等複雜度）

### 3. 無附件處理需求
- 所有問答均為純文字內容
- 側邊欄的表單下載非問答專屬
- **可簡化架構**，不需附件下載功能

### 4. 資料品質高
- 問答配對完整（問題+答案）
- Metadata 齊全（來源、分類、日期）
- 有相關法規連結
- 適合 RAG 向量搜尋

---

## 🎯 推薦實作策略

### 階段 1: P0 資料源（優先）
1. **勞動部常見問答** - 383 筆
   - 涵蓋最廣泛的勞動法規問題
   - 結構最簡單，可快速上線

2. **勞保局常見問答** - 200-300 筆
   - 專注勞工保險領域
   - 樹狀結構需遞迴解析

**預期完成**: 5-6 天

### 階段 2: P1 資料源（次要）
3. **職安署常見問答** - 140 筆
   - 專注職業安全衛生
   - 分類明確，易於標記

**預期完成**: 1-2 天

### 階段 3: 上傳與優化
- Plain Text 格式優化
- 上傳到 Gemini File Search Store (`labor-faqs`)
- RAG 查詢測試

**預期完成**: 2-3 天

**總計**: 8-11 天完成整個專案

---

## 📋 建議資料格式

### JSONL 儲存格式
```json
{
  "id": "mol_faq_20250821_0001",
  "source": "mol",
  "category": "勞動契約",
  "subcategory": "契約認定",
  "question": "怎麼判斷是否為勞動契約？",
  "answer": {
    "text": "勞動契約認定...",
    "html": "<p>勞動契約認定...</p>"
  },
  "related_laws": [
    {"name": "勞動契約認定指導原則", "url": "..."}
  ],
  "metadata": {
    "department": "勞動關係司",
    "published_date": "2025-08-13",
    "updated_date": "2025-09-03",
    "views": 1234
  },
  "detail_url": "https://..."
}
```

### Plain Text 上傳格式
```
問題: 怎麼判斷是否為勞動契約？勞資雙方認知不同？要怎麼辦？
來源: 勞動部 / 勞動契約
更新日期: 2025-09-03

答案:
勞動契約認定指導原則及勞動契約從屬性判斷檢核表（108年11月19日訂定），
已公告於勞動部勞動法令查詢系統...

相關法規:
- 勞動契約認定指導原則
- 勞動契約從屬性判斷檢核表
```

---

## 🚀 向量搜尋優化策略

基於 FSC 專案經驗：

### ✅ 採用 Plain Text 格式
- 比 Markdown 效果好 **40-60%**
- 語義密度高，檢索準確
- 無格式噪音

### ✅ 保留關鍵 Metadata
- 問題標題（主要檢索目標）
- 答案內容（語義補充）
- 來源/分類（篩選條件）
- 相關法規（延伸資訊）

### ❌ 移除無用資訊
- 點閱數、發布單位
- HTML 標籤、CSS class
- 麵包屑、導航列

### 預期效果範例
**用戶查詢**: 「公司不幫我保勞保怎麼辦」
**檢索結果**:
- 勞保局問答「受僱勞工要求公司不要幫他辦理勞保，想繼續在工會加保，可以嗎？」
- 勞動部問答「雇主未依規定為員工投保勞保，有何罰則？」

---

## 📁 專案結構

```
~/Projects/Labor/
├── src/
│   ├── crawlers/
│   │   ├── base.py                 # 抽象基類
│   │   ├── mol_faq.py             # 勞動部爬蟲
│   │   ├── bli_faq.py             # 勞保局爬蟲
│   │   └── osha_faq.py            # 職安署爬蟲
│   ├── processor/
│   │   └── labor_plaintext_optimizer.py
│   ├── storage/
│   │   ├── jsonl_handler.py
│   │   └── index_manager.py
│   └── utils/
│       ├── helpers.py
│       └── config_loader.py
├── scripts/
│   ├── crawl_mol_full.py
│   ├── crawl_bli_full.py
│   ├── crawl_osha_full.py
│   └── upload_to_gemini.py
├── config/
│   ├── sources.yaml
│   └── crawler.yaml
├── data/
│   ├── mol_faq/
│   ├── bli_faq/
│   └── osha_faq/
├── docs/
│   ├── WEBSITE_ANALYSIS.md        # 詳細分析（已完成）
│   └── SUMMARY.md                 # 本文檔
└── logs/
```

---

## 💡 下一步行動

### 立即可執行
1. ✅ 網站結構分析完成
2. ⏭️ 建立專案架構（基於 FSC）
3. ⏭️ 實作勞動部爬蟲（P0 優先）
4. ⏭️ 測試爬取 30 筆
5. ⏭️ 完整爬取 383 筆

### 技術準備
- Python 虛擬環境
- 依賴套件（requests, beautifulsoup4, loguru, python-dotenv）
- Gemini API Key（上傳階段使用）

---

## 📞 問題與討論

1. **是否放棄健保署資料源？**
   - 建議: ✅ 放棄（Cloudflare 阻擋，成本高）

2. **是否需要附件下載功能？**
   - 建議: ❌ 不需要（當前問答無實質附件）

3. **資料更新頻率？**
   - 建議: 每月或每季增量更新（依據「更新日期」）

4. **Gemini Store 命名？**
   - 建議: `labor-faqs` 或 `labor-regulations-faq`

---

**詳細技術分析請參閱**: `docs/WEBSITE_ANALYSIS.md`
